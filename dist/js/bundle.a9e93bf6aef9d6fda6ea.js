webpackJsonp([0],[,function(t,i,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}e(2),e(4);var s=e(6),h=a(s);e(9);var o=e(11),d=a(o),n=e(14),c=a(n),l=e(42),r=a(l),g=e(43),m=a(g),u=u||{};u.game=new h.default.Game("100%","100%",h.default.AUTO,"root"),u.BootState=d.default,u.LoadState=c.default,u.StartState=r.default,u.PlayState=m.default,u.game.state.add("Boot",u.BootState),u.game.state.add("Load",u.LoadState),u.game.state.add("Start",u.StartState),u.game.state.add("Play",u.PlayState),u.game.state.start("Boot")},,,,,,,,function(t,i){},,function(t,i,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var s=e(12),h=a(s),o=e(13),d=a(o),n={init:function(){this.game.stage.backgroundColor="#000",this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0},preload:function(){this.game.load.image("preload",h.default),this.game.load.spritesheet("mycloud",d.default,224,224)},create:function(){this.game.state.start("Load")}};t.exports=n},function(t,i,e){t.exports=e.p+"image/57ca1a2085d82f0574e3ef740b9a5ead.gif"},function(t,i,e){t.exports=e.p+"image/7847e55ad513120884ecc9deb42c4e5f.png"},function(t,i,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var s=e(15),h=a(s),o=e(16),d=a(o),n=e(17),c=a(n),l=e(18),r=a(l),g=e(19),m=a(g),u=e(20),f=a(u),p=e(21),b=a(p),y=e(22),w=a(y),x=e(23),_=a(x),T=e(24),v=a(T),k=e(25),S=a(k),C=e(26),P=a(C),E=e(27),I=a(E),A=e(28),B=a(A),M=e(29),L=a(M),z=e(30),O=a(z),D=e(31),H=a(D),F=e(32),W=a(F),X=e(33),N=a(X),J=e(34),G=a(J),Q=e(35),R=a(Q),U=e(36),j=a(U),V=e(37),Y=a(V),K=e(38),q=a(K),Z=e(39),$=a(Z),tt=e(40),it=a(tt),et=e(41),at=a(et),st={init:function(){this.game.stage.backgroundColor="#000",this.mycloud=this.game.add.sprite(this.game.world.centerX,this.game.world.height/2,"mycloud"),this.mycloud.anchor.setTo(.5,.5),this.mycloud.spritescale=.5,this.mycloud.scale.setTo(this.mycloud.spritescale),this.mycloud.animations.add("run",[1,2,3,4],10,!0),this.mycloud.animations.play("run"),this.typewriter()},preload:function(){var t=this.game.add.sprite(this.game.width/2-110,this.mycloud.y+this.mycloud.height/2,"preload");this.game.load.setPreloadSprite(t),this.game.load.image("dialogue",h.default),this.game.load.image("bg",d.default),this.game.load.image("longform_btn_click",c.default),this.game.load.image("longform_btn",r.default),this.game.load.image("startgame_btn_click",m.default),this.game.load.image("startgame_btn",f.default),this.game.load.image("title",b.default),this.game.load.image("btn_1_1",w.default),this.game.load.image("btn_1_1_click",_.default),this.game.load.image("btn_2_1",v.default),this.game.load.image("btn_2_1_click",S.default),this.game.load.image("btn_3_1",P.default),this.game.load.image("btn_3_1_click",I.default),this.game.load.image("firstbg",B.default),this.game.load.image("darksky",L.default),this.game.load.image("blackcloud1",O.default),this.game.load.image("blackcloud2",H.default),this.game.load.image("bigcloud",W.default),this.game.load.spritesheet("hail",N.default,93,93),this.game.load.spritesheet("corn",G.default,240,189),this.game.load.image("redheart",R.default),this.game.load.image("blackheart",j.default),this.game.load.image("ice_break",Y.default),this.game.load.image("cloud",q.default),this.game.load.image("bigcloud_anger1",$.default),this.game.load.image("bigcloud_anger2",it.default),this.game.load.spritesheet("cow",at.default,70,60),this.game.load.onFileComplete.add(function(t){})},create:function(){this.game.state.start("Start",!0,!1,"startpage")},typewriter:function(){this.content=["每 到 夏 天 ， 除 了 颱 風 外 ， 對 流 旺 ","盛 也 常 帶 來 冰 雹 等 災 害 性 天 氣 ， ","現 在 你 有 機 會 拯 救 台 灣 不 受 冰 雹 ","侵 襲 ， 你 準 備 好 了 嗎 ？ _ "],this.line=[],this.wordIndex=0,this.lineIndex=0,this.wordDelay=100,this.lineDelay=0,this.finished=!1,this.text=this.game.add.text(.21*this.game.world.width,this.mycloud.y-2*this.mycloud.height,"",{font:"16px Microsoft JhengHei",fill:"#fff"}),this.nextLine()},nextLine:function(){if(this.lineIndex===this.content.length)return this.finished=!0,void this.game.time.events.add(2*Phaser.Timer.SECOND,this.create,this);this.line=this.content[this.lineIndex].split(" "),this.wordIndex=0,this.game.time.events.repeat(this.wordDelay,this.line.length,this.nextWord,this),this.lineIndex++},nextWord:function(){this.text.text=this.text.text.concat(this.line[this.wordIndex]),++this.wordIndex===this.line.length&&(this.text.text=this.text.text.concat("\n"),this.game.time.events.add(this.lineDelay,this.nextLine,this))}};t.exports=st},function(t,i,e){t.exports=e.p+"image/477bdfc746b6ebf74c15d743ef356f8f.png"},function(t,i,e){t.exports=e.p+"image/8acfc93fdbf97cabd8ff50d98cf2c770.jpg"},function(t,i,e){t.exports=e.p+"image/80ff2d08a47ab73700af4256b384423f.png"},function(t,i,e){t.exports=e.p+"image/efe42e1bf0851a292148c3c4c058d173.png"},function(t,i,e){t.exports=e.p+"image/32b44ebaad908e963b4b13d2487b0692.png"},function(t,i,e){t.exports=e.p+"image/fa17377be651a8507dcfc594b039592c.png"},function(t,i,e){t.exports=e.p+"image/92d3961850f918db6308e255f48d7507.png"},function(t,i,e){t.exports=e.p+"image/c3e2db495a61f31715b1431eedab9a22.png"},function(t,i,e){t.exports=e.p+"image/2dd86720c7791b1ed33a6fc3e447f80c.png"},function(t,i,e){t.exports=e.p+"image/98d56e11ed509f0f1169ac29715f59cc.png"},function(t,i,e){t.exports=e.p+"image/a005b67358273d2229cd40e6af77509c.png"},function(t,i,e){t.exports=e.p+"image/b7548773a9ad3a002a01fa000557b8a0.png"},function(t,i,e){t.exports=e.p+"image/cda0c9c3742a7b28ed5be5b955e28583.png"},function(t,i,e){t.exports=e.p+"image/32e811048ebfdec90502dcecd9936b81.jpg"},function(t,i,e){t.exports=e.p+"image/551ba1d984cae4c1c00500d6d223aeb9.png"},function(t,i,e){t.exports=e.p+"image/c511e3775ef5501d83e01951b7da2bdb.png"},function(t,i,e){t.exports=e.p+"image/943dd14a36d2fa331fd0a2b82deddd44.png"},function(t,i,e){t.exports=e.p+"image/8457c4ec8c7bbfd20206858b1e5848b8.png"},function(t,i,e){t.exports=e.p+"image/73fa7200f3778acadcf517b43d03f2bc.png"},function(t,i,e){t.exports=e.p+"image/13274755cb99d12a9984a2e1e25a2d1b.png"},function(t,i,e){t.exports=e.p+"image/d4e7167d0f06efd370f57d29ac790ed9.png"},function(t,i,e){t.exports=e.p+"image/953dc0d8aecec3d88267c9044f1eaeaa.png"},function(t,i,e){t.exports=e.p+"image/fb6882219ef23d471bc41464c23bcdc6.png"},function(t,i,e){t.exports=e.p+"image/17acd07aed2ec72bf76f6a15d6c832c8.png"},function(t,i,e){t.exports=e.p+"image/1efbefbfb2613ab91d81aaefcdae5640.png"},function(t,i,e){t.exports=e.p+"image/1a9f6cd8080861d27f64036b9cbba5c3.png"},function(t,i,e){t.exports=e.p+"image/78408e16dfdc1f3c8621359d11995933.png"},function(t,i,e){"use strict";var a={init:function(t){this.beginning=t,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT},create:function(){if("startpage"===this.beginning){var t=this.game.add.image(0,0,"bg");t.width=this.game.world.width,t.height=this.game.world.height;var i=this.game.add.image(0,-100,"title");i.width=1.1*this.game.world.width,i.height=.6*this.game.world.height;this.game.add.tween(i).to({y:0},1e3,Phaser.Easing.Bounce.Out,!0).start(),this.createStartPageBtn("startgame_btn",!1),this.createStartPageBtn("longform_btn",!1)}else{this.game.stage.backgroundColor="#000";var e=this.game.add.sprite(this.game.world.centerX,this.game.world.height/2,"mycloud");e.anchor.setTo(.5,.5),e.spritescale=.5,e.scale.setTo(e.spritescale);var a=this.game.add.image(e.x,e.y-e.height,"dialogue");a.width=.8*this.game.world.width,a.height=.2*this.game.world.height,a.anchor.setTo(.5,.5),this.mycloudSpeaking(a),this.createStartPageBtn("btn_1_1",!1),this.createStartPageBtn("btn_3_1",!1)}},mycloudSpeaking:function(t){var i={font:"16px Microsoft JhengHei",fill:"#000",boundsAlignH:"center",boundsAlignV:"middle",wordWrap:!0,wordWrapWidth:.6*t.width};this.game.add.text(t.x,t.y,"我來自雲端，看不慣雲朵製造冰\n雹危害人類，要拯救地球不受冰\n雹攻擊。\n",i).anchor.setTo(.5,.5)},createStartPageBtn:function(t,i){var e=this.game.world.centerX,a=.9*this.game.world.height,s=a-72,h=i?t+"_click":t;if("startgame_btn"===t){var o=this.game.add.button(e,s,h,this.onStartClick,this,1,1,0);o.anchor.setTo(.5,.2),o.width=150,o.height=48}else if("longform_btn"===t){var d=this.game.add.button(e,a,h,this.onLongformClick,this,1,1,0);d.anchor.setTo(.5,.4),d.width=150,d.height=48}else if("btn_1_1"===t){var n=this.game.add.button(e,s,h,this.onIntroClick,this,1,1,0);n.anchor.setTo(.5,.2),n.width=150,n.height=48;var c={font:"22px Microsoft JhengHei",fill:"#fff"},l=this.game.add.text(n.x,n.y,"遊戲說明",c);l.anchor.setTo(.5,0)}else if("btn_3_1"===t){var r=this.game.add.button(e,a,h,this.onStartAnywayClick,this,1,1,0);r.anchor.setTo(.5,.4),r.width=150,r.height=48;var c={font:"22px Microsoft JhengHei",fill:"#fff"},g=this.game.add.text(r.x,r.y,"直接開始",c);g.anchor.setTo(.5,.3)}},onStartClick:function(){this.createStartPageBtn("startgame_btn",!0),this.game.state.start("Start",!0,!1,"mycloudOS")},onLongformClick:function(){this.createStartPageBtn("longform_btn",!0),console.log("longform")},onIntroClick:function(){this.createStartPageBtn("btn_1_1",!0),console.log("intro")},onStartAnywayClick:function(){this.createStartPageBtn("btn_3_1",!0),this.game.state.start("Play",!0,!1,"level1")}};t.exports=a},function(t,i,e){"use strict";var a={init:function(t){this.level=t,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT},create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.scenesFactory(this.level),this.settingMyCloud(),this.mycloudEmitter=this.emitterGenerator()},update:function(){this.game.physics.arcade.overlap(this.hails,this.mycloud,this.hitmyCloud,null,this),this.game.physics.arcade.overlap(this.hails,this.corns,this.hitCorn,null,this),this.mycloudStop()},render:function(){},hitCorn:function(t,i){switch(t.kill(),i.life){case 3:i.frame=1,this.corns.children.forEach(function(t){t.life--},this);break;case 2:this.corns.children.forEach(function(t){t.frame=2,t.life--},this);break;case 1:this.corns.children.forEach(function(t){t.frame=3,t.life--},this)}this.mycloudLifeHandler(--this.mycloud.life)},hitmyCloud:function(t,i){i.kill(),this.hailCrushed(i.x,i.y,i.scale.x);var e=this.game.add.tween(t);e.to({tint:10279403},200),e.onComplete.add(function(){t.tint=16777215},this),e.start(),i.scale.x==this.hails.bigsizeScale&&this.hitbyBighail(i)},hitbyBighail:function(t){this.mycloud.clickTimes=0,this.mycloud.isfreezing=!0,this.mycloud.scale.setTo(1),this.onclickEmitter(this.mycloud)},cornInitialize:function(){this.corns=this.game.add.group(),this.corns.enableBody=!0;var t=(this.game.cache.getImage("corn").width,.785*this.game.height),i=1*this.game.width/6,e=1*this.game.width/2,a=5*this.game.width/6;this.left_corn=this.game.add.sprite(i,t,"corn"),this.left_corn.frame=0,this.left_corn.scale.setTo(.5,.5),this.left_corn.anchor.setTo(.5,0),this.left_corn.life=3,this.corns.add(this.left_corn),this.game.physics.arcade.enable(this.left_corn),this.middle_corn=this.game.add.sprite(e,t,"corn"),this.middle_corn.frame=0,this.middle_corn.scale.setTo(.5,.5),this.middle_corn.anchor.setTo(.5,0),this.middle_corn.life=3,this.corns.add(this.middle_corn),this.game.physics.arcade.enable(this.middle_corn),this.right_corn=this.game.add.sprite(a,t,"corn"),this.right_corn.frame=0,this.right_corn.scale.setTo(.5,.5),this.right_corn.anchor.setTo(.5,0),this.right_corn.life=3,this.corns.add(this.right_corn),this.game.physics.arcade.enable(this.right_corn)},settingMyCloud:function(){var t=this.game.world.centerX,i=.65*this.game.world.height;this.mycloud=this.game.add.sprite(t,i,"mycloud"),this.mycloud.anchor.setTo(.5,.5),this.mycloud.life=3,this.mycloud.spritescale=.4,this.mycloud.scale.setTo(this.mycloud.spritescale);var e=this.game.cache.getImage("mycloud").width/5;this.mycloud.animations.add("run",[1,2,3,4],10,!0),this.game.physics.arcade.enable(this.mycloud),this.mycloud.body.collideWorldBounds=!0,this.mycloud.body.setSize(.8*e,.8*e,.1*e,.1*e),this.mycloud.touching=!1,this.mycloud.inputEnabled=!0,this.mycloud.isfreezing=!1,this.mycloudMove()},mycloudMove:function(){var t=this.mycloud.spritescale;this.mycloud.events.onInputDown.add(function(){this.mycloud.touching=!0},this),this.mycloud.events.onInputUp.add(function(){this.mycloud.touching=!1,this.mycloud.animations.stop(),this.mycloud.frame=0},this),this.game.input.addMoveCallback(function(i,e,a,s){this.game.device.desktop&&!this.mycloud.isfreezing?(e>this.mycloud.x?this.mycloud.scale.setTo("-"+t,t):this.mycloud.scale.setTo(t,t),this.mycloud.x=e,this.mycloud.animations.play("run")):this.game.device.desktop||this.mycloud.isfreezing||(this.mycloud.touching?(this.mycloud.body.velocity.x=0,e>this.mycloud.x?this.mycloud.scale.setTo("-"+t,t):this.mycloud.scale.setTo(t,t),this.mycloud.x=e):e>this.mycloud.x+this.mycloud.width/2?(this.mycloud.scale.setTo("-"+t,t),this.mycloud.body.velocity.x=200):e<this.mycloud.x-this.mycloud.width/2?(this.mycloud.scale.setTo(t,t),this.mycloud.body.velocity.x=-200):this.mycloud.body.velocity.x=0,this.mycloud.animations.play("run"))},this)},mycloudStop:function(){this.game.input.onUp.add(function(){this.mycloud.body.velocity.x=0,this.mycloud.animations.stop(),this.mycloud.frame=0},this)},scenesFactory:function(t){if("level1"===t)var i=this.game.add.image(0,0,"firstbg");i.width=this.game.world.width,i.height=this.game.world.height,this.cornInitialize();var e=this.game.add.image(0,-100,"darksky");e.width=this.game.world.width,e.height=.35*this.game.world.height;var a=this.game.add.image(-150,0,"blackcloud1"),s=this.game.cache.getImage("blackcloud1");a.width=.5*this.game.world.width,a.height=a.width/s.width*s.height;var h=this.game.add.image(300,0,"blackcloud2"),o=this.game.cache.getImage("blackcloud2");h.width=.65*this.game.world.width,h.height=h.width/o.width*o.height;var d=this.game.add.image(-30,this.game.world.height/2,"cloud"),n=this.game.cache.getImage("cloud");d.width=1.2*this.game.world.width,d.height=d.width/n.width*n.height;var c=this.game.add.sprite(.1*this.game.world.width,.75*this.game.world.height,"cow");c.scale.setTo(.6,.6),c.anchor.setTo(.5,.5),c.animations.add("cow").play(10,!0),this.bigcloud=this.game.add.image(this.game.world.centerX,-200,"bigcloud"),this.bigcloud.anchor.setTo(.5,0);var l=this.game.cache.getImage("bigcloud");this.bigcloud.width=this.game.world.width,this.bigcloud.height=this.bigcloud.width/l.width*l.height,this.game.add.tween(e).to({y:0},1e3,Phaser.Easing.Bounce.In,!0).start(),this.game.add.tween(a).to({x:-50},500,Phaser.Easing.Linear.In,!0,1e3).start(),this.game.add.tween(h).to({x:200},500,Phaser.Easing.Linear.In,!0,1200).start(),this.bigcloud.Yposition=10;var r=this.game.add.tween(this.bigcloud).to({y:this.bigcloud.Yposition},700,Phaser.Easing.Sinusoidal.InOut,!0,1700);r.start(),r.onComplete.add(this.onStart,this)},onStart:function(){this.bigcloud_anger1=this.game.add.image(.7*this.bigcloud.width,.55*this.bigcloud.height,"bigcloud_anger1"),this.bigcloud_anger1.anchor.setTo(.5,.5),this.bigcloud_anger1.width=this.bigcloud.width/20,this.bigcloud_anger1.height=this.bigcloud.width/20,this.bigcloud_anger2=this.game.add.image(.15*this.bigcloud.width,.8*this.bigcloud.height,"bigcloud_anger2"),this.bigcloud_anger2.anchor.setTo(.5,.5),this.bigcloud_anger2.width=this.bigcloud.width/20,this.bigcloud_anger2.height=this.bigcloud.width/20,this.mycloudLifeHandler(this.mycloud.life),this.hails=this.game.add.group(),this.hails.enableBody=!0,this.hailcrushes=this.game.add.group(),this.hailingTimer=this.game.time.create(!1),this.hailingTimer.loop(1*Phaser.Timer.SECOND,this.hailing,this),this.hailingTimer.start(),this.bighailAppearTimer=this.game.time.create(!1),this.bighailAppearTimer.loop(5*Phaser.Timer.SECOND,this.hailing,this,"big"),this.bighailAppearTimer.start()},heartmaker:function(t){var i=t[0],e=t[1],a=t[2];this.heart3=this.game.add.image(10,20,i),this.heart2=this.game.add.image(this.heart3.x+.6*this.heart3.width,20,e),this.heart1=this.game.add.image(this.heart2.x+.6*this.heart2.width,20,a),this.heart3.scale.setTo(.6),this.heart2.scale.setTo(.6),this.heart1.scale.setTo(.6)},bighailAppear:function(){this.bighailAppearTimer.pause();var t=this.game.cache.getImage("hail").width/3,i=this.game.world.centerX,e=this.game.height/2,a=this.bighails.getFirstExists(!1,!0,i,e,"hail");a.scale.setTo(1.5,1.5),a.anchor.setTo(.5,1),a.clickTimes=0,a.inputEnabled=!0,a.body.setSize(.6*t,.6*t,.2*t,.2*t),this.clearhails(),this.onclickEmitter(a),this.game.time.events.add(5*Phaser.Timer.SECOND,this.fightbighail,this,a)},emitterGenerator:function(){var t=this.game.add.emitter(0,0,500);return t.makeParticles("ice_break"),t.minParticleSpeed.set(-1e3,-500),t.maxParticleSpeed.set(1e3,500),t.gravity=0,t.setRotation(10,50),t.setScale(.5,.5,1,1,0,Phaser.Easing.Quintic.Out),t},onclickEmitter:function(t){this.clickEmitter=t.events.onInputDown.add(function(t,i){t.clickTimes++,t.clickTimes>=5?(t.clickTimes=0,this.mycloud.isfreezing=!1,this.clickEmitter.active=!1,this.mycloud.scale.setTo(this.mycloud.spritescale)):(this.mycloudEmitter.x=i.x,this.mycloudEmitter.y=i.y,this.mycloudEmitter.start(!0,2e3,null,10),this.addQuake())},this)},addQuake:function(){this.game.camera.shake(.01,500)},fightbighail:function(t){if(t.clickTimes>10)t.destroy(),this.hailCrushed(t.x,t.y,t.scale.x,t.anchor.y),this.hailingTimer=this.game.time.create(!0),this.hailingTimer.loop(1*Phaser.Timer.SECOND,this.hailing,this),this.hailingTimer.start(),this.bighailAppearTimer.resume();else{var i=this.game.add.tween(t).to({alpha:.5},500,Phaser.Easing.Linear.None,!0);i.start(),i.onComplete.add(function(){t.destroy(),this.hailingTimer=this.game.time.create(!0),this.hailingTimer.loop(.1*Phaser.Timer.SECOND,this.hailing,this),this.hailingTimer.start(),this.bighailAppearTimer.resume()},this)}this.bighailAppearTimer.resume()},clearhails:function(){this.hailingTimer.pause(),this.bighailAppearTimer.pause(),this.hails.forEachAlive(function(t){t.kill()},this)},hailing:function(t){var i=this.game.cache.getImage("hail").width/3,e=this.game.rnd.integerInRange(0,this.game.width-i),a=this.bigcloud.y+this.bigcloud.height,s=this.hails.getFirstExists(!1,!0,e,a,"hail");this.hails.smallsizeScale=.5,this.hails.bigsizeScale=1.5,"big"===t?s.scale.setTo(this.hails.bigsizeScale):s.scale.setTo(this.hails.smallsizeScale),this.game.physics.arcade.enable(s),s.body.setSize(.6*i,.6*i,.2*i,.3*i),s.body.velocity.y=300,s.outOfBoundsKill=!0,s.checkWorldBounds=!0},hailCrushed:function(t,i,e,a){var s=a||.5,h=this.hailcrushes.getFirstExists(!1,!0,t,i,"hail");h.anchor.setTo(.5,s),h.scale.setTo(e);var o=h.animations.add("hail");o.play(60,!1,!1),o.onComplete.addOnce(function(){h.destroy()},this)},mycloudLifeHandler:function(t){for(var i=[],e=0;e<3;e++)i[e]=e<=t-1?"redheart":"blackheart";this.heartmaker(i)}};t.exports=a}],[1]);